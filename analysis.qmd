---
title: "Analysis"
author: "Tanish Thaker"
format: html
execute: 
  echo: false
---

```{r}
#| message: false
#| label: setup

library(tidyverse)
library(primer.data)
library(brms)
library(tidybayes)
```

```{r}
star <- read_csv("data/STAR.csv")
```

```{r}
x <- star |>
  mutate(kinder = factor(classtype, 
                         levels = c(1, 2, 3), 
                         labels = c("small", "regular", "regular with aid")),
         race = factor(race, 
                       levels = c(1, 2, 3, 4, 5, 6), 
                       labels = c("white", "black", "asian", "hispanic", "native_american", "others")),
         race = fct_collapse(race,
                             others = c("asian", "native_american", "others")))
```

```{r}
x |>
  select(kinder, race, g4math) |>
  drop_na(g4math)
```


Question: How does class size in K-4 school classes affect student performances? (Causal Affect)

Quantity of Interest: Student Scores

Preceptor Table: 
Units- Each Student
Outcome- g4math
Covariate- YearsSmall, classtype
Treatment- Different Class Size

Population Table: 
Time- Year

4 Key Assumptions with one counter for each:
Validity- Math scores calculated differently across schools in the US
Stability- Education System is different in diffferent schools and times
Unconfoundedness- Schools selected are schools in districts that have better grades
Representativeness- Only data in Tenessee which doesn't represent the US

